# Game Engine

There are several game modes in Sinavia.

These are:
- Ranked Game 
- Friend Game
- Group Game
> This document will be updated with further game modes if necessary.

> For the prototype implementation we will only discuss game modes without the level system.

## Ranked Game (Prototype)

### General Info

Player limit of a ranked room is 2.

```
this.maxClients = 2
```

After the room limit is reached, a new room instance is created upon user connection.

```
requestJoin (options, isNew) {
    return (options.create && isNew) || this.clients.length > 0
  }
```

Here is how the random matchmaking system for ranked game works:

1. User connects to our game engine using the room name:

```
this.client.join("rankedGame")
```

2. In the server, a new room gets created and the same user joins the room.

3. When another user wants to play ranked game, they also connect to our game engine as shown in step 1 and they join the room.

4. After 2 players, we then lock the room for security measures. (If a user suddenly leaves the room, this creates an opening for a random player to join the room)

5. If a new user wants to play ranked, they cannot enter this room and they start from the first step then continue.

So every time a room is full, a new one gets created without problems.

## Friend Game (Prototype)

### General Info

Player limit of a friend room is also 2.

```
this.maxClients = 2
```

A user will not be able to join a room randomly.
In the state of the room, there will be a new attribute. We will use this as an authorization mechanic for our friend room.

Here is how friend game system works:

1. A user initiates friend game by selecting a friend and pressing start.

2. We then generate a password and send it with any other info in the notification to user's friend.

3. A friend room gets created and the user joins the room.

```
this.client.join("rankedGame", {
    password: SOME_PASSWORD
})
```

4. When we create our friend room, we set a special password. So when the friend uses the same code piece to join the created room, he/she will not joint any other room because of our password system.

```
onAuth (options) {
    return (options.password === "secret")
}
```
> "secret" will be a key generated by the user at the startup of our room.

## Group Game (Prototype)

### General Info

There aren't any pre-defined player limits to this game mode. The user defines the limit.

Like the friend game mode, a new user doen't join the game in a random manner.

This game mode uses the same authorization mechanic as friend game.

Here is how group game system works:

1. A user initiates friend game by selecting friends and pressing start.

2. We then generate a password and send it with any other info in the notification to user's friends.

3. A group room gets created and other users starts joining the room.

```
this.client.join("rankedGame", {
    password: SOME_PASSWORD
})
```

4. When we create our friend room, we set a special password. So when the friend uses the same code piece to join the created room, he/she will not joint any other room because of our password system.

```
onAuth (options) {
    return (options.password === "secret")
}
```
> "secret" will be a key generated by the user at the startup of our room.

So this is basically friends game mode but with more people.